{% extends 'base.html' %}
{% block content %}

<h3>{{ mother.name }}</h3>
<h3>{{ child.name }}</h3>





<form method="POST" action="{% url 'immunization_view' child.id %}">
    {% csrf_token %}
    

    
    <div class="immunization-card">
        <h2 class="text-center">IMMUNIZATION</h2>
        <h3 class="text-center">PROTECT YOUR CHILD</h3>
      
        <!-- BCG Vaccine Table -->
        <div class="vaccine-section">
            <h4>BCG VACCINE: at birth (intra-dermal left fore arm)</h4>
            <table class="table table-bordered immunization-table">
                <thead>
                    <tr>
                        <th>Dose</th>
                        <th>Date Given</th>
                        <th>Date of next visit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>0.05ml (for child below 1 year)</td>
                        <td><input type="date" name="bcg_date_given" class="form-control" value="{{ form.bcg_date_given.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="bcg_next_visit" class="form-control" value="{{ form.bcg_next_visit.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>0.1ml (for child above 1 year)</td>
                        <td><input type="date" name="bcg_date_given_above1" class="form-control" value="{{ form.bcg_date_given_above1.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="bcg_next_visit_above1" class="form-control" value="{{ form.bcg_next_visit_above1.value|date:'Y-m-d' }}"></td>
                    </tr>
                </tbody>
            </table>
            
            <div class="row mt-2">
                <div class="col-md-6">
                    <label>BCG-Scar Checked (Date Checked)</label>
                    <input type="date" name="bcg_scar_checked" class="form-control" value="{{ form.bcg_scar_checked.value|date:'Y-m-d' }}">
                </div>
                <div class="col-md-6">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="bcg_scar_present" id="scarPresent" value="true" {% if form.bcg_scar_present.value %}checked{% endif %}>
                        <label class="form-check-label" for="scarPresent">PRESENT</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="bcg_scar_present" id="scarAbsent" value="false" {% if not form.bcg_scar_present.value %}checked{% endif %}>
                        <label class="form-check-label" for="scarAbsent">ABSENT</label>
                    </div>
                </div>
            </div>
            
            <div class="mt-2">
                <label>Repeat vaccine BCG (Date repeated)</label>
                <input type="date" name="bcg_repeated_date" class="form-control" value="{{ form.bcg_repeated_date.value|date:'Y-m-d' }}">
            </div>
        </div>
      
        <!-- Polio Vaccine Section -->
        <div class="vaccine-section mt-4">
            <h4>POLIO VACCINE: (Bivalent Oral Polio Vaccine(bOPV))</h4>
            <p><strong>Dose:</strong> 2 drops orally</p>
            
            <table class="table table-bordered immunization-table">
                <thead>
                    <tr>
                        <th>Dose</th>
                        <th>Date Given</th>
                        <th>Date of next visit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Birth Dose at birth or within 2wks</td>
                        <td><input type="date" name="opv_birth_date" class="form-control" value="{{ form.opv_birth_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="opv_birth_next_date" class="form-control" value="{{ form.opv_birth_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>1st Dose at 6 weeks</td>
                        <td><input type="date" name="opv1_date" class="form-control" value="{{ form.opv1_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="opv1_next_date" class="form-control" value="{{ form.opv1_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>2nd Dose at 10 weeks</td>
                        <td><input type="date" name="opv2_date" class="form-control" value="{{ form.opv2_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="opv2_next_date" class="form-control" value="{{ form.opv2_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>3rd Dose at 14 weeks</td>
                        <td><input type="date" name="opv3_date" class="form-control" value="{{ form.opv3_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="opv3_next_date" class="form-control" value="{{ form.opv3_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                </tbody>
            </table>
            
            <h5 class="mt-3">IPV (Inactivated Polio Vaccine)</h5>
            <p>IPV (0.5ml) Dose at 14 weeks intramuscular into the outer aspect of the right thigh 2.5cm (2 fingers apart) from the site of PCV10 injection.</p>
            <div class="row">
                <div class="col-md-6">
                    <label>Date Given</label>
                    <input type="date" name="ipv_date" class="form-control" value="{{ form.ipv_date.value|date:'Y-m-d' }}">
                </div>
                <div class="col-md-6">
                    <label>Next Visit</label>
                    <input type="date" name="ipv_next_date" class="form-control" value="{{ form.ipv_next_date.value|date:'Y-m-d' }}">
                </div>
            </div>
        </div>
      
        <!-- Pentavalent Vaccine Section -->
        <div class="vaccine-section mt-4">
            <h4>DIPHTHERIA/PERTUSSIS/TETANUS/HEPATITIS B/HAEMOPHILUS INFLUENZA Type b</h4>
            <p><strong>Dose:</strong> 0.5ml Intra Muscular left outer thigh</p>
            
            <table class="table table-bordered immunization-table">
                <thead>
                    <tr>
                        <th>Dose</th>
                        <th>Date Given</th>
                        <th>Date of next visit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1st Dose at 6 weeks</td>
                        <td><input type="date" name="penta1_date" class="form-control" value="{{ form.penta1_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="penta1_next_date" class="form-control" value="{{ form.penta1_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>2nd Dose at 10 weeks</td>
                        <td><input type="date" name="penta2_date" class="form-control" value="{{ form.penta2_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="penta2_next_date" class="form-control" value="{{ form.penta2_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>3rd Dose at 14 weeks</td>
                        <td><input type="date" name="penta3_date" class="form-control" value="{{ form.penta3_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="penta3_next_date" class="form-control" value="{{ form.penta3_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
      
        <!-- PCV Vaccine Section -->
        <div class="vaccine-section mt-4">
            <h4>PNEUMOCOCCAL CONJUGATE VACCINE (PCV)</h4>
            <p><strong>Dose:</strong> 0.5ml Intramuscular into the upper outer aspect of the right thigh</p>
            
            <table class="table table-bordered immunization-table">
                <thead>
                    <tr>
                        <th>Dose</th>
                        <th>Date Given</th>
                        <th>Date of next visit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1st Dose at 6 weeks</td>
                        <td><input type="date" name="pcv1_date" class="form-control" value="{{ form.pcv1_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="pcv1_next_date" class="form-control" value="{{ form.pcv1_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>2nd Dose at 10 weeks</td>
                        <td><input type="date" name="pcv2_date" class="form-control" value="{{ form.pcv2_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="pcv2_next_date" class="form-control" value="{{ form.pcv2_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>3rd Dose at 14 weeks</td>
                        <td><input type="date" name="pcv3_date" class="form-control" value="{{ form.pcv3_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="pcv3_next_date" class="form-control" value="{{ form.pcv3_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                </tbody>
            </table>
            
            <div class="row mt-2">
                <div class="col-md-6">
                    <label>Injection Site</label>
                    <select name="pcv_injection_site" class="form-control">
                        <option value="RIGHT_THIGH" {% if form.pcv_injection_site.value == 'RIGHT_THIGH' %}selected{% endif %}>Right thigh (upper outer)</option>
                        <option value="LEFT_THIGH" {% if form.pcv_injection_site.value == 'LEFT_THIGH' %}selected{% endif %}>Left thigh (upper outer)</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label>Batch Number</label>
                    <input type="text" name="pcv_batch_number" class="form-control" value="{{ form.pcv_batch_number.value }}">
                </div>
            </div>
        </div>
        
        <!-- Rotavirus Vaccine Section -->
        <div class="vaccine-section mt-4">
            <h4>ROTAVIRUS VACCINE</h4>
            <p><strong>Dose:</strong> 0.5ml (5 drops) administered orally</p>
            
            <table class="table table-bordered immunization-table">
                <thead>
                    <tr>
                        <th>Dose</th>
                        <th>Date Given</th>
                        <th>Date of next visit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1st dose at 6 weeks</td>
                        <td><input type="date" name="rota1_date" class="form-control" value="{{ form.rota1_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="rota1_next_date" class="form-control" value="{{ form.rota1_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>2nd dose at 10 weeks</td>
                        <td><input type="date" name="rota2_date" class="form-control" value="{{ form.rota2_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="rota2_next_date" class="form-control" value="{{ form.rota2_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td>3rd dose at 14 weeks</td>
                        <td><input type="date" name="rota3_date" class="form-control" value="{{ form.rota3_date.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="rota3_next_date" class="form-control" value="{{ form.rota3_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                </tbody>
            </table>
            
            <div class="row mt-2">
                <div class="col-md-6">
                    <label>Administered By</label>
                    <input type="text" name="rota_administered_by" class="form-control" value="{{ form.rota_administered_by.value }}">
                </div>
                <div class="col-md-6">
                    <label>Reaction Observed</label>
                    <select name="rota_reaction" class="form-control">
                        <option value="NONE" {% if form.rota_reaction.value == 'NONE' %}selected{% endif %}>None</option>
                        <option value="MILD" {% if form.rota_reaction.value == 'MILD' %}selected{% endif %}>Mild (vomiting)</option>
                        <option value="MODERATE" {% if form.rota_reaction.value == 'MODERATE' %}selected{% endif %}>Moderate (diarrhea)</option>
                        <option value="SEVERE" {% if form.rota_reaction.value == 'SEVERE' %}selected{% endif %}>Severe (intussusception)</option>
                    </select>
                </div>
            </div>
            
            <div class="alert alert-warning mt-3">
                <strong>Note:</strong> Rotavirus vaccine should not be given to infants with history of intussusception or severe combined immunodeficiency (SCID).
            </div>
        </div>

        <!-- MR Vaccine Section -->
        <div class="vaccine-section mt-4">
            <h4>MEASLES RUBELLA VACCINE (MR)</h4>
            
            <!-- MR at 6 months -->
            <div class="mb-3">
                <h5>MR at 6 months (for measles rubella outbreak or HIV Exposed Infant)</h5>
                <div class="row">
                    <div class="col-md-6">
                        <label>Date Given</label>
                        <input type="date" name="mr6_date" class="form-control" value="{{ form.mr6_date.value|date:'Y-m-d' }}">
                    </div>
                    <div class="col-md-6">
                        <label>Date of next visit</label>
                        <input type="date" name="mr6_next_date" class="form-control" value="{{ form.mr6_next_date.value|date:'Y-m-d' }}">
                    </div>
                </div>
            </div>
            
            <!-- MR at 9 months -->
            <div class="mb-3">
                <h5>MR at 9 months</h5>
                <div class="row">
                    <div class="col-md-6">
                        <label>Date Given</label>
                        <input type="date" name="mr9_date" class="form-control" value="{{ form.mr9_date.value|date:'Y-m-d' }}">
                    </div>
                    <div class="col-md-6">
                        <label>Date of next visit</label>
                        <input type="date" name="mr9_next_date" class="form-control" value="{{ form.mr9_next_date.value|date:'Y-m-d' }}">
                    </div>
                </div>
            </div>
            
            <!-- MR at 18 months -->
            <div class="mb-3">
                <h5>MR at 18 Months</h5>
                <div class="row">
                    <div class="col-md-6">
                        <label>Date Given</label>
                        <input type="date" name="mr18_date" class="form-control" value="{{ form.mr18_date.value|date:'Y-m-d' }}">
                    </div>
                    <div class="col-md-6">
                        <label>Date of next visit</label>
                        <input type="date" name="mr18_next_date" class="form-control" value="{{ form.mr18_next_date.value|date:'Y-m-d' }}">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Yellow Fever Vaccine Section -->
        <div class="vaccine-section mt-4">
            <h4>YELLOW FEVER VACCINE at 9 months**</h4>
            <p><strong>** Only in selected counties</strong></p>
            <div class="row">
                <div class="col-md-6">
                    <label>Date Given</label>
                    <input type="date" name="yf_date" class="form-control" value="{{ form.yf_date.value|date:'Y-m-d' }}">
                </div>
                <div class="col-md-6">
                    <label>Date of next visit</label>
                    <input type="date" name="yf_next_date" class="form-control" value="{{ form.yf_next_date.value|date:'Y-m-d' }}">
                </div>
            </div>
            
            <div class="row mt-2">
                <div class="col-md-6">
                    <label>Batch Number</label>
                    <input type="text" name="yf_batch_number" class="form-control" value="{{ form.yf_batch_number.value }}">
                </div>
                <div class="col-md-6">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="yf_eligible" id="yellowFeverEligible" {% if form.yf_eligible.value %}checked{% endif %}>
                        <label class="form-check-label" for="yellowFeverEligible">Eligible for Yellow Fever vaccine</label>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Other Vaccines Section -->
        <div class="vaccine-section mt-4">
            <h4>OTHER VACCINES</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>VACCINE</th>
                        <th>DATE GIVEN</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" name="other_vaccine1_name" class="form-control" value="{{ form.other_vaccine1_name.value }}"></td>
                        <td><input type="date" name="other_vaccine1_date" class="form-control" value="{{ form.other_vaccine1_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="other_vaccine2_name" class="form-control" value="{{ form.other_vaccine2_name.value }}"></td>
                        <td><input type="date" name="other_vaccine2_date" class="form-control" value="{{ form.other_vaccine2_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Adverse Events Section -->
        <div class="vaccine-section mt-4 alert alert-danger">
            <h4>ADVERSE EVENT FOLLOWING IMMUNIZATION (AEFI)</h4>
            
            <div class="row">
                <div class="col-md-4">
                    <label>DATE</label>
                    <input type="date" name="aefi_date" class="form-control" value="{{ form.aefi_date.value|date:'Y-m-d' }}">
                </div>
                <div class="col-md-8">
                    <label>DESCRIBE</label>
                    <textarea name="aefi_description" class="form-control" rows="2">{{ form.aefi_description.value }}</textarea>
                </div>
            </div>
            
            <div class="row mt-2">
                <div class="col-md-4">
                    <label>Antigen Vaccine</label>
                    <input type="text" name="aefi_vaccine" class="form-control" value="{{ form.aefi_vaccine.value }}">
                </div>
                <div class="col-md-4">
                    <label>Batch Number</label>
                    <input type="text" name="aefi_batch_number" class="form-control" value="{{ form.aefi_batch_number.value }}">
                </div>
                <div class="col-md-4">
                    <label>Manufacturer's Name</label>
                    <input type="text" name="aefi_manufacturer" class="form-control" value="{{ form.aefi_manufacturer.value }}">
                </div>
            </div>
            
            <div class="row mt-2">
                <div class="col-md-6">
                    <label>Manufacture Date</label>
                    <input type="date" name="aefi_manufacture_date" class="form-control" value="{{ form.aefi_manufacture_date.value|date:'Y-m-d' }}">
                </div>
                <div class="col-md-6">
                    <label>Expiry Date</label>
                    <input type="date" name="aefi_expiry_date" class="form-control" value="{{ form.aefi_expiry_date.value|date:'Y-m-d' }}">
                </div>
            </div>
        </div>
        
        <!-- Vitamin A Section -->
        <div class="vaccine-section">
            <h3>VITAMIN A SUPPLEMENTATION (VAS)</h3>
            <table class="table table-bordered">
                <thead class="table-primary">
                    <tr>
                        <th>Dose</th>
                        <th>Age</th>
                        <th>Age given</th>
                        <th>Date given</th>
                        <th>Date of next visit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>100,000IU</td>
                        <td>6 months</td>
                        <td><input type="text" name="vita6_age_given" class="form-control" value="{{ form.vita6_age_given.value }}"></td>
                        <td><input type="date" name="vita6_date_given" class="form-control" value="{{ form.vita6_date_given.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="vita6_next_date" class="form-control" value="{{ form.vita6_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <!-- Add other vitamin A rows similarly -->
                </tbody>
            </table>
        </div>
        
        <!-- Micronutrient Powders Section -->
        <div class="vaccine-section mt-4">
            <h3>MICRONUTRIENT POWDERS (MNPs)</h3>
            <table class="table table-bordered">
                <thead class="table-primary">
                    <tr>
                        <th>Age in months</th>
                        <th>6</th>
                        <th>7</th>
                        <!-- Add other months -->
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Number issued</td>
                        <td><input type="number" name="mnp_month6_issued" class="form-control" min="0" max="10" value="{{ form.mnp_month6_issued.value }}"></td>
                        <td><input type="number" name="mnp_month7_issued" class="form-control" min="0" max="10" value="{{ form.mnp_month7_issued.value }}"></td>
                        <!-- Add other months -->
                    </tr>
                    <!-- Add date issued and next visit rows similarly -->
                </tbody>
            </table>
        </div>
        
        <!-- Deworming Section -->
        <div class="vaccine-section mt-4">
            <h3>DEWORMING</h3>
            <table class="table table-bordered">
                <thead class="table-primary">
                    <tr>
                        <th>Age</th>
                        <th>Dosage/Tablet</th>
                        <th>Age given</th>
                        <th>Date given</th>
                        <th>Next visit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>12 months (1 year)</td>
                        <td>
                            <select name="deworm12_dosage" class="form-control">
                                <option value="">Select dosage</option>
                                <option value="200mg" {% if form.deworm12_dosage.value == '200mg' %}selected{% endif %}>200mg (½ tablet)</option>
                                <option value="400mg" {% if form.deworm12_dosage.value == '400mg' %}selected{% endif %}>400mg (1 tablet)</option>
                            </select>
                        </td>
                        <td><input type="text" name="deworm12_age_given" class="form-control" value="{{ form.deworm12_age_given.value }}"></td>
                        <td><input type="date" name="deworm12_date_given" class="form-control" value="{{ form.deworm12_date_given.value|date:'Y-m-d' }}"></td>
                        <td><input type="date" name="deworm12_next_date" class="form-control" value="{{ form.deworm12_next_date.value|date:'Y-m-d' }}"></td>
                    </tr>
                    <!-- Add other deworming rows similarly -->
                </tbody>
            </table>
        </div>
        
        <!-- HIV Sections would follow the same pattern -->
        
        <!-- Common Fields -->
        <div class="row mt-4">
            <div class="col-md-6">
                <label>Batch Number</label>
                <input type="text" name="batch_number" class="form-control" value="{{ form.batch_number.value }}">
            </div>
            <div class="col-md-6">
                <label>Administered By</label>
                <input type="text" name="administered_by" class="form-control" value="{{ form.administered_by.value }}">
            </div>
        </div>
        
        <div class="mt-3">
            <label>Notes</label>
            <textarea name="notes" class="form-control" rows="3">{{ form.notes.value }}</textarea>
        </div>
        
        <button type="submit" class="btn btn-primary mt-4">Save Immunization Record</button>
    </div>
</form>


{% endblock %}